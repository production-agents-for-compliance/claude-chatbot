{
  "firm_name": "Meridian",
  "policy_version": "2025-11",
  "last_updated": "2025-11-18T20:41:05.434Z",
  "generated_by_llm": true,
  "total_iterations": 4,
  "rules": [
    {
      "rule_id": "restricted_tickers_block",
      "rule_name": "Restricted Tickers Block",
      "description": "Blocks any trade in securities explicitly listed in the employee's restricted_tickers list.",
      "policy_reference": "General Policy - Restricted List",
      "python_code": "def rule(employee, security, trade):\n    if security['ticker'] in employee.get('restricted_tickers', []):\n        return {'allowed': False, 'reason': f\"Ticker {security['ticker']} is on your restricted list.\", 'policy_ref': 'General Policy - Restricted List'}\n    return {'allowed': True, 'reason': None, 'policy_ref': None}",
      "applies_to_roles": [],
      "active": true,
      "generation_attempt": 1,
      "validation_history": [
        {
          "attempt_number": 1,
          "passed": true,
          "test_output": "{\"allowed\":false,\"reason\":\"Ticker TSLA is on your restricted list.\",\"policy_ref\":\"General Policy - Restricted List\"}",
          "timestamp": "2025-11-18T20:40:48.396Z"
        }
      ]
    },
    {
      "rule_id": "earnings_blackout_5_days",
      "rule_name": "Earnings Blackout Period (5 Days)",
      "description": "Prohibits trading within 5 days before or after earnings announcements",
      "policy_reference": "Meridian Policy - Earnings Blackout",
      "python_code": "def rule(employee, security, trade):\n    from datetime import datetime, timedelta\n    if isinstance(trade, dict):\n        trade_date_val = trade.get('date')\n    else:\n        trade_date_val = trade\n    if isinstance(trade_date_val, str):\n        trade_date = datetime.fromisoformat(trade_date_val.replace('Z', '+00:00')).date()\n    elif hasattr(trade_date_val, 'date'):\n        trade_date = trade_date_val.date() if callable(getattr(trade_date_val, 'date', None)) else trade_date_val\n    else:\n        trade_date = trade_date_val\n    if not trade_date:\n        return {'allowed': False, 'reason': 'Trade date is missing.', 'policy_ref': 'Meridian Policy - Earnings Blackout'}\n    earnings_dates = []\n    if security.get('earnings_date'):\n        earnings_dates.append(security['earnings_date'])\n    if security.get('next_earnings_date'):\n        earnings_dates.append(security['next_earnings_date'])\n    if security.get('last_earnings_date'):\n        earnings_dates.append(security['last_earnings_date'])\n    for ed_val in earnings_dates:\n        if ed_val:\n            if isinstance(ed_val, str):\n                earnings_date = datetime.fromisoformat(ed_val.replace('Z', '+00:00')).date()\n            elif hasattr(ed_val, 'date'):\n                earnings_date = ed_val.date() if callable(getattr(ed_val, 'date', None)) else ed_val\n            else:\n                earnings_date = ed_val\n            days_diff = abs((trade_date - earnings_date).days)\n            if days_diff <= 5:\n                return {'allowed': False, 'reason': f'Trade is within 5 days of earnings date {earnings_date}.', 'policy_ref': 'Meridian Policy - Earnings Blackout'}\n    return {'allowed': True, 'reason': None, 'policy_ref': None}",
      "applies_to_roles": [],
      "active": true,
      "generation_attempt": 2,
      "validation_history": [
        {
          "attempt_number": 1,
          "passed": false,
          "error": "Traceback (most recent call last):\n  File \"<string>\", line 1, in <module>\n    exec(__import__(\"base64\").b64decode(\"CmltcG9ydCBiYXNlNjQKaW1wb3J0IGpzb24KaW1wb3J0IHRleHR3cmFwCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lCgpwYXlsb2FkID0ganNvbi5sb2FkcyhiYXNlNjQuYjY0ZGVjb2RlKCJleUpqYjJSbElqb2laR1ZtSUhKMWJHVW9aVzF3Ykc5NVpXVXNJSE5sWTNWeWFYUjVMQ0IwY21Ga1pTazZYRzRnSUNBZ1puSnZiU0JrWVhSbGRHbHRaU0JwYlhCdmNuUWdaR0YwWlhScGJXVXNJSFJwYldWa1pXeDBZVnh1SUNBZ0lIUnlZV1JsWDJSaGRHVWdQU0JrWVhSbGRHbHRaUzVtY205dGFYTnZabTl5YldGMEtIUnlZV1JsV3lka1lYUmxKMTB1Y21Wd2JHRmpaU2duV2ljc0lDY3JNREE2TURBbktTa3VaR0YwWlNncElHbG1JR2x6YVc1emRHRnVZMlVvZEhKaFpHVXVaMlYwS0Nka1lYUmxKeWtzSUhOMGNpa2daV3h6WlNCMGNtRmtaUzVuWlhRb0oyUmhkR1VuS1Z4dUlDQWdJR2xtSUc1dmRDQjBjbUZrWlY5a1lYUmxPbHh1SUNBZ0lDQWdJQ0J5WlhSMWNtNGdleWRoYkd4dmQyVmtKem9nUm1Gc2MyVXNJQ2R5WldGemIyNG5PaUFuVkhKaFpHVWdaR0YwWlNCcGN5QnRhWE56YVc1bkxpY3NJQ2R3YjJ4cFkzbGZjbVZtSnpvZ0owMWxjbWxrYVdGdUlGQnZiR2xqZVNBdElFVmhjbTVwYm1keklFSnNZV05yYjNWMEozMWNiaUFnSUNCbFlYSnVhVzVuYzE5a1lYUmxjeUE5SUZ0ZFhHNGdJQ0FnYVdZZ2MyVmpkWEpwZEhrdVoyVjBLQ2RsWVhKdWFXNW5jMTlrWVhSbEp5azZYRzRnSUNBZ0lDQWdJR1ZoY201cGJtZHpYMlJoZEdWekxtRndjR1Z1WkNoelpXTjFjbWwwZVZzblpXRnlibWx1WjNOZlpHRjBaU2RkS1Z4dUlDQWdJR2xtSUhObFkzVnlhWFI1TG1kbGRDZ25ibVY0ZEY5bFlYSnVhVzVuYzE5a1lYUmxKeWs2WEc0Z0lDQWdJQ0FnSUdWaGNtNXBibWR6WDJSaGRHVnpMbUZ3Y0dWdVpDaHpaV04xY21sMGVWc25ibVY0ZEY5bFlYSnVhVzVuYzE5a1lYUmxKMTBwWEc0Z0lDQWdhV1lnYzJWamRYSnBkSGt1WjJWMEtDZHNZWE4wWDJWaGNtNXBibWR6WDJSaGRHVW5LVHBjYmlBZ0lDQWdJQ0FnWldGeWJtbHVaM05mWkdGMFpYTXVZWEJ3Wlc1a0tITmxZM1Z5YVhSNVd5ZHNZWE4wWDJWaGNtNXBibWR6WDJSaGRHVW5YU2xjYmlBZ0lDQm1iM0lnWldSZmMzUnlJR2x1SUdWaGNtNXBibWR6WDJSaGRHVnpPbHh1SUNBZ0lDQWdJQ0JwWmlCbFpGOXpkSEk2WEc0Z0lDQWdJQ0FnSUNBZ0lDQmxZWEp1YVc1bmMxOWtZWFJsSUQwZ1pHRjBaWFJwYldVdVpuSnZiV2x6YjJadmNtMWhkQ2hsWkY5emRISXVjbVZ3YkdGalpTZ25XaWNzSUNjck1EQTZNREFuS1NrdVpHRjBaU2dwSUdsbUlHbHphVzV6ZEdGdVkyVW9aV1JmYzNSeUxDQnpkSElwSUdWc2MyVWdaV1JmYzNSeVhHNGdJQ0FnSUNBZ0lDQWdJQ0JrWVhselgyUnBabVlnUFNCaFluTW9LSFJ5WVdSbFgyUmhkR1VnTFNCbFlYSnVhVzVuYzE5a1lYUmxLUzVrWVhsektWeHVJQ0FnSUNBZ0lDQWdJQ0FnYVdZZ1pHRjVjMTlrYVdabUlEdzlJRFU2WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnY21WMGRYSnVJSHNuWVd4c2IzZGxaQ2M2SUVaaGJITmxMQ0FuY21WaGMyOXVKem9nWmx3aVZISmhaR1VnYVhNZ2QybDBhR2x1SURVZ1pHRjVjeUJ2WmlCbFlYSnVhVzVuY3lCa1lYUmxJSHRsWVhKdWFXNW5jMTlrWVhSbGZTNWNJaXdnSjNCdmJHbGplVjl5WldZbk9pQW5UV1Z5YVdScFlXNGdVRzlzYVdONUlDMGdSV0Z5Ym1sdVozTWdRbXhoWTJ0dmRYUW5mVnh1SUNBZ0lISmxkSFZ5YmlCN0oyRnNiRzkzWldRbk9pQlVjblZsTENBbmNtVmhjMjl1SnpvZ1RtOXVaU3dnSjNCdmJHbGplVjl5WldZbk9pQk9iMjVsZlNJc0ltVnRjR3h2ZVdWbElqcDdJbWxrSWpvaWRtRnNhV1JoZEc5eUxXVnRjQ0lzSW5KdmJHVWlPaUpGY1hWcGRIa2dVbVZ6WldGeVkyZ2dRVzVoYkhsemRDQXRJRlJsWTJodWIyeHZaM2tpTENKa2FYWnBjMmx2YmlJNklsSmxjMlZoY21Ob0lpd2laR1Z3WVhKMGJXVnVkQ0k2SWxKbGMyVmhjbU5vSWl3aWMyVmpkRzl5SWpvaVZHVmphRzV2Ykc5bmVTSXNJblJwWlhJaU9qSXNJbVpwY20waU9pSk5aWEpwWkdsaGJpQlFiMnhwWTNrZ0xTQkZZWEp1YVc1bmN5QkNiR0ZqYTI5MWRDSXNJbkpsYzNSeWFXTjBaV1JmZEdsamEyVnljeUk2V3lKQlFWQk1JaXdpVkZOTVFTSXNJazFUUmxRaUxDSkhUMDlIVENKZExDSmpZVzVmZEhKaFpHVWlPbHNpVTFCWklpd2lWbFJKSWl3aVFrNUVJbDBzSW1OdmRtVnlZV2RsWDNOMGIyTnJjeUk2VzNzaWRHbGphMlZ5SWpvaVFVRlFUQ0lzSW1OdmJYQmhibmtpT2lKQmNIQnNaU0JKYm1NaUxDSnlZWFJwYm1jaU9pSkNkWGtpTENKd2NtbGpaVjkwWVhKblpYUWlPakkxTUgwc2V5SjBhV05yWlhJaU9pSk5VMFpVSWl3aVkyOXRjR0Z1ZVNJNklrMXBZM0p2YzI5bWRDSXNJbkpoZEdsdVp5STZJa0oxZVNJc0luQnlhV05sWDNSaGNtZGxkQ0k2TkRjMWZTeDdJblJwWTJ0bGNpSTZJa2RQVDBkTUlpd2lZMjl0Y0dGdWVTSTZJa0ZzY0doaFltVjBJaXdpY21GMGFXNW5Jam9pU0c5c1pDSXNJbkJ5YVdObFgzUmhjbWRsZENJNk1UZzFmU3g3SW5ScFkydGxjaUk2SWxSVFRFRWlMQ0pqYjIxd1lXNTVJam9pVkdWemJHRWlMQ0p5WVhScGJtY2lPaUpYWVhSamFDSXNJbkJ5YVdObFgzUmhjbWRsZENJNk1qQXdmVjBzSW1GamRHbDJaVjlrWldGc2N5STZXM3NpZEdsamEyVnlJam9pUTFaQlNTSXNJbVJsWVd4ZmRIbHdaU0k2SWtsUVR5SXNJbkpsWVhOdmJpSTZJa3hsWVdRZ1ltRnVhMlZ5SUc5dUlFbFFUeUJrWldGc0luMWRMQ0pqWVc1ZmRISmhaR1ZmY21WaGMyOXVJam9pVTJGdGNHeGxJSFpoYkdsa1lYUnZjaUJrWVhSaElpd2lZMjkyWlhKbFpGOTBhV05yWlhKeklqcGJJa0ZCVUV3aUxDSk5VMFpVSWl3aVIwOVBSMHdpTENKVVUweEJJbDE5TENKelpXTjFjbWwwZVNJNmV5SjBhV05yWlhJaU9pSlVVMHhCSWl3aVpXRnlibWx1WjNOZlpHRjBaU0k2SWpJd01qVXRNVEV0TWpBaUxDSnVaWGgwWDJWaGNtNXBibWR6WDJSaGRHVWlPaUl5TURJMUxURXhMVEl3SWl3aWJHRnpkRjlsWVhKdWFXNW5jMTlrWVhSbElqb2lNakF5TlMwd09DMHhOU0lzSW0xaGNtdGxkRjlqWVhBaU9qRXdNREF3TURBd01EQXNJbWx6WDJOdmRtVnlaV1FpT25SeWRXVXNJbkpsY1hWcGNtVnpYM0J5WldGd2NISnZkbUZzSWpwbVlXeHpaWDBzSW5SeVlXUmxYMlJoZEdVaU9pSXlNREkxTFRFeExURTRJbjA9IikuZGVjb2RlKCJ1dGYtOCIpKQpuYW1lc3BhY2UgPSB7fQpjb2RlID0gdGV4dHdyYXAuZGVkZW50KHBheWxvYWRbImNvZGUiXSkKZXhlYyhjb2RlLCBuYW1lc3BhY2UpCgpydWxlX2ZuID0gTm9uZQpmb3IgdmFsdWUgaW4gbmFtZXNwYWNlLnZhbHVlcygpOgogICAgaWYgY2FsbGFibGUodmFsdWUpOgogICAgICAgIHJ1bGVfZm4gPSB2YWx1ZQogICAgICAgIGJyZWFrCgppZiBydWxlX2ZuIGlzIE5vbmU6CiAgICByYWlzZSBWYWx1ZUVycm9yKCJObyBjYWxsYWJsZSBydWxlIGZ1bmN0aW9uIGZvdW5kIGluIHB5dGhvbl9jb2RlIikKCmRlZiBfcGFyc2VfZGF0ZSh2YWx1ZSk6CiAgICBpZiBpc2luc3RhbmNlKHZhbHVlLCBzdHIpOgogICAgICAgIHRyeToKICAgICAgICAgICAgcmV0dXJuIGRhdGV0aW1lLmZyb21pc29mb3JtYXQodmFsdWUpCiAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6CiAgICAgICAgICAgIHJldHVybiB2YWx1ZQogICAgcmV0dXJuIHZhbHVlCgplbXBsb3llZSA9IHBheWxvYWRbImVtcGxveWVlIl0Kc2VjdXJpdHkgPSBwYXlsb2FkWyJzZWN1cml0eSJdCgpmb3Iga2V5IGluICgiZWFybmluZ3NfZGF0ZSIsICJuZXh0X2Vhcm5pbmdzX2RhdGUiLCAibGFzdF9lYXJuaW5nc19kYXRlIik6CiAgICBpZiBrZXkgaW4gc2VjdXJpdHk6CiAgICAgICAgc2VjdXJpdHlba2V5XSA9IF9wYXJzZV9kYXRlKHNlY3VyaXR5W2tleV0pCgp0cmFkZV9kYXRlID0gcGF5bG9hZFsidHJhZGVfZGF0ZSJdCnJlc3VsdCA9IHJ1bGVfZm4oZW1wbG95ZWUsIHNlY3VyaXR5LCB0cmFkZV9kYXRlKQoKaWYgbm90IGlzaW5zdGFuY2UocmVzdWx0LCBkaWN0KToKICAgIHJhaXNlIFZhbHVlRXJyb3IoIlJ1bGUgbXVzdCByZXR1cm4gYSBkaWN0IHdpdGggYW4gJ2FsbG93ZWQnIGtleSIpCgppZiAiYWxsb3dlZCIgbm90IGluIHJlc3VsdDoKICAgIHJhaXNlIFZhbHVlRXJyb3IoIlJlc3VsdCBkaWN0IGlzIG1pc3NpbmcgJ2FsbG93ZWQnIikKCnByaW50KCJfX1JVTEVfT1VUUFVUX18iKQpwcmludChqc29uLmR1bXBzKHJlc3VsdCkpCnByaW50KCJfX1JVTEVfT1VUUFVUX0VORF9fIikK\").decode())\n    ~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"<string>\", line 37, in <module>\n  File \"<string>\", line 3, in rule\nAttributeError: 'str' object has no attribute 'get'",
          "feedback_to_llm": "Runtime failure: Traceback (most recent call last):\n  File \"<string>\", line 1, in <module>\n    exec(__import__(\"base64\").b64decode(\"CmltcG9ydCBiYXNlNjQKaW1wb3J0IGpzb24KaW1wb3J0IHRleHR3cmFwCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lCgpwYXlsb2FkID0ganNvbi5sb2FkcyhiYXNlNjQuYjY0ZGVjb2RlKCJleUpqYjJSbElqb2laR1ZtSUhKMWJHVW9aVzF3Ykc5NVpXVXNJSE5sWTNWeWFYUjVMQ0IwY21Ga1pTazZYRzRnSUNBZ1puSnZiU0JrWVhSbGRHbHRaU0JwYlhCdmNuUWdaR0YwWlhScGJXVXNJSFJwYldWa1pXeDBZVnh1SUNBZ0lIUnlZV1JsWDJSaGRHVWdQU0JrWVhSbGRHbHRaUzVtY205dGFYTnZabTl5YldGMEtIUnlZV1JsV3lka1lYUmxKMTB1Y21Wd2JHRmpaU2duV2ljc0lDY3JNREE2TURBbktTa3VaR0YwWlNncElHbG1JR2x6YVc1emRHRnVZMlVvZEhKaFpHVXVaMlYwS0Nka1lYUmxKeWtzSUhOMGNpa2daV3h6WlNCMGNtRmtaUzVuWlhRb0oyUmhkR1VuS1Z4dUlDQWdJR2xtSUc1dmRDQjBjbUZrWlY5a1lYUmxPbHh1SUNBZ0lDQWdJQ0J5WlhSMWNtNGdleWRoYkd4dmQyVmtKem9nUm1Gc2MyVXNJQ2R5WldGemIyNG5PaUFuVkhKaFpHVWdaR0YwWlNCcGN5QnRhWE56YVc1bkxpY3NJQ2R3YjJ4cFkzbGZjbVZtSnpvZ0owMWxjbWxrYVdGdUlGQnZiR2xqZVNBdElFVmhjbTVwYm1keklFSnNZV05yYjNWMEozMWNiaUFnSUNCbFlYSnVhVzVuYzE5a1lYUmxjeUE5SUZ0ZFhHNGdJQ0FnYVdZZ2MyVmpkWEpwZEhrdVoyVjBLQ2RsWVhKdWFXNW5jMTlrWVhSbEp5azZYRzRnSUNBZ0lDQWdJR1ZoY201cGJtZHpYMlJoZEdWekxtRndjR1Z1WkNoelpXTjFjbWwwZVZzblpXRnlibWx1WjNOZlpHRjBaU2RkS1Z4dUlDQWdJR2xtSUhObFkzVnlhWFI1TG1kbGRDZ25ibVY0ZEY5bFlYSnVhVzVuYzE5a1lYUmxKeWs2WEc0Z0lDQWdJQ0FnSUdWaGNtNXBibWR6WDJSaGRHVnpMbUZ3Y0dWdVpDaHpaV04xY21sMGVWc25ibVY0ZEY5bFlYSnVhVzVuYzE5a1lYUmxKMTBwWEc0Z0lDQWdhV1lnYzJWamRYSnBkSGt1WjJWMEtDZHNZWE4wWDJWaGNtNXBibWR6WDJSaGRHVW5LVHBjYmlBZ0lDQWdJQ0FnWldGeWJtbHVaM05mWkdGMFpYTXVZWEJ3Wlc1a0tITmxZM1Z5YVhSNVd5ZHNZWE4wWDJWaGNtNXBibWR6WDJSaGRHVW5YU2xjYmlBZ0lDQm1iM0lnWldSZmMzUnlJR2x1SUdWaGNtNXBibWR6WDJSaGRHVnpPbHh1SUNBZ0lDQWdJQ0JwWmlCbFpGOXpkSEk2WEc0Z0lDQWdJQ0FnSUNBZ0lDQmxZWEp1YVc1bmMxOWtZWFJsSUQwZ1pHRjBaWFJwYldVdVpuSnZiV2x6YjJadmNtMWhkQ2hsWkY5emRISXVjbVZ3YkdGalpTZ25XaWNzSUNjck1EQTZNREFuS1NrdVpHRjBaU2dwSUdsbUlHbHphVzV6ZEdGdVkyVW9aV1JmYzNSeUxDQnpkSElwSUdWc2MyVWdaV1JmYzNSeVhHNGdJQ0FnSUNBZ0lDQWdJQ0JrWVhselgyUnBabVlnUFNCaFluTW9LSFJ5WVdSbFgyUmhkR1VnTFNCbFlYSnVhVzVuYzE5a1lYUmxLUzVrWVhsektWeHVJQ0FnSUNBZ0lDQWdJQ0FnYVdZZ1pHRjVjMTlrYVdabUlEdzlJRFU2WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnY21WMGRYSnVJSHNuWVd4c2IzZGxaQ2M2SUVaaGJITmxMQ0FuY21WaGMyOXVKem9nWmx3aVZISmhaR1VnYVhNZ2QybDBhR2x1SURVZ1pHRjVjeUJ2WmlCbFlYSnVhVzVuY3lCa1lYUmxJSHRsWVhKdWFXNW5jMTlrWVhSbGZTNWNJaXdnSjNCdmJHbGplVjl5WldZbk9pQW5UV1Z5YVdScFlXNGdVRzlzYVdONUlDMGdSV0Z5Ym1sdVozTWdRbXhoWTJ0dmRYUW5mVnh1SUNBZ0lISmxkSFZ5YmlCN0oyRnNiRzkzWldRbk9pQlVjblZsTENBbmNtVmhjMjl1SnpvZ1RtOXVaU3dnSjNCdmJHbGplVjl5WldZbk9pQk9iMjVsZlNJc0ltVnRjR3h2ZVdWbElqcDdJbWxrSWpvaWRtRnNhV1JoZEc5eUxXVnRjQ0lzSW5KdmJHVWlPaUpGY1hWcGRIa2dVbVZ6WldGeVkyZ2dRVzVoYkhsemRDQXRJRlJsWTJodWIyeHZaM2tpTENKa2FYWnBjMmx2YmlJNklsSmxjMlZoY21Ob0lpd2laR1Z3WVhKMGJXVnVkQ0k2SWxKbGMyVmhjbU5vSWl3aWMyVmpkRzl5SWpvaVZHVmphRzV2Ykc5bmVTSXNJblJwWlhJaU9qSXNJbVpwY20waU9pSk5aWEpwWkdsaGJpQlFiMnhwWTNrZ0xTQkZZWEp1YVc1bmN5QkNiR0ZqYTI5MWRDSXNJbkpsYzNSeWFXTjBaV1JmZEdsamEyVnljeUk2V3lKQlFWQk1JaXdpVkZOTVFTSXNJazFUUmxRaUxDSkhUMDlIVENKZExDSmpZVzVmZEhKaFpHVWlPbHNpVTFCWklpd2lWbFJKSWl3aVFrNUVJbDBzSW1OdmRtVnlZV2RsWDNOMGIyTnJjeUk2VzNzaWRHbGphMlZ5SWpvaVFVRlFUQ0lzSW1OdmJYQmhibmtpT2lKQmNIQnNaU0JKYm1NaUxDSnlZWFJwYm1jaU9pSkNkWGtpTENKd2NtbGpaVjkwWVhKblpYUWlPakkxTUgwc2V5SjBhV05yWlhJaU9pSk5VMFpVSWl3aVkyOXRjR0Z1ZVNJNklrMXBZM0p2YzI5bWRDSXNJbkpoZEdsdVp5STZJa0oxZVNJc0luQnlhV05sWDNSaGNtZGxkQ0k2TkRjMWZTeDdJblJwWTJ0bGNpSTZJa2RQVDBkTUlpd2lZMjl0Y0dGdWVTSTZJa0ZzY0doaFltVjBJaXdpY21GMGFXNW5Jam9pU0c5c1pDSXNJbkJ5YVdObFgzUmhjbWRsZENJNk1UZzFmU3g3SW5ScFkydGxjaUk2SWxSVFRFRWlMQ0pqYjIxd1lXNTVJam9pVkdWemJHRWlMQ0p5WVhScGJtY2lPaUpYWVhSamFDSXNJbkJ5YVdObFgzUmhjbWRsZENJNk1qQXdmVjBzSW1GamRHbDJaVjlrWldGc2N5STZXM3NpZEdsamEyVnlJam9pUTFaQlNTSXNJbVJsWVd4ZmRIbHdaU0k2SWtsUVR5SXNJbkpsWVhOdmJpSTZJa3hsWVdRZ1ltRnVhMlZ5SUc5dUlFbFFUeUJrWldGc0luMWRMQ0pqWVc1ZmRISmhaR1ZmY21WaGMyOXVJam9pVTJGdGNHeGxJSFpoYkdsa1lYUnZjaUJrWVhSaElpd2lZMjkyWlhKbFpGOTBhV05yWlhKeklqcGJJa0ZCVUV3aUxDSk5VMFpVSWl3aVIwOVBSMHdpTENKVVUweEJJbDE5TENKelpXTjFjbWwwZVNJNmV5SjBhV05yWlhJaU9pSlVVMHhCSWl3aVpXRnlibWx1WjNOZlpHRjBaU0k2SWpJd01qVXRNVEV0TWpBaUxDSnVaWGgwWDJWaGNtNXBibWR6WDJSaGRHVWlPaUl5TURJMUxURXhMVEl3SWl3aWJHRnpkRjlsWVhKdWFXNW5jMTlrWVhSbElqb2lNakF5TlMwd09DMHhOU0lzSW0xaGNtdGxkRjlqWVhBaU9qRXdNREF3TURBd01EQXNJbWx6WDJOdmRtVnlaV1FpT25SeWRXVXNJbkpsY1hWcGNtVnpYM0J5WldGd2NISnZkbUZzSWpwbVlXeHpaWDBzSW5SeVlXUmxYMlJoZEdVaU9pSXlNREkxTFRFeExURTRJbjA9IikuZGVjb2RlKCJ1dGYtOCIpKQpuYW1lc3BhY2UgPSB7fQpjb2RlID0gdGV4dHdyYXAuZGVkZW50KHBheWxvYWRbImNvZGUiXSkKZXhlYyhjb2RlLCBuYW1lc3BhY2UpCgpydWxlX2ZuID0gTm9uZQpmb3IgdmFsdWUgaW4gbmFtZXNwYWNlLnZhbHVlcygpOgogICAgaWYgY2FsbGFibGUodmFsdWUpOgogICAgICAgIHJ1bGVfZm4gPSB2YWx1ZQogICAgICAgIGJyZWFrCgppZiBydWxlX2ZuIGlzIE5vbmU6CiAgICByYWlzZSBWYWx1ZUVycm9yKCJObyBjYWxsYWJsZSBydWxlIGZ1bmN0aW9uIGZvdW5kIGluIHB5dGhvbl9jb2RlIikKCmRlZiBfcGFyc2VfZGF0ZSh2YWx1ZSk6CiAgICBpZiBpc2luc3RhbmNlKHZhbHVlLCBzdHIpOgogICAgICAgIHRyeToKICAgICAgICAgICAgcmV0dXJuIGRhdGV0aW1lLmZyb21pc29mb3JtYXQodmFsdWUpCiAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6CiAgICAgICAgICAgIHJldHVybiB2YWx1ZQogICAgcmV0dXJuIHZhbHVlCgplbXBsb3llZSA9IHBheWxvYWRbImVtcGxveWVlIl0Kc2VjdXJpdHkgPSBwYXlsb2FkWyJzZWN1cml0eSJdCgpmb3Iga2V5IGluICgiZWFybmluZ3NfZGF0ZSIsICJuZXh0X2Vhcm5pbmdzX2RhdGUiLCAibGFzdF9lYXJuaW5nc19kYXRlIik6CiAgICBpZiBrZXkgaW4gc2VjdXJpdHk6CiAgICAgICAgc2VjdXJpdHlba2V5XSA9IF9wYXJzZV9kYXRlKHNlY3VyaXR5W2tleV0pCgp0cmFkZV9kYXRlID0gcGF5bG9hZFsidHJhZGVfZGF0ZSJdCnJlc3VsdCA9IHJ1bGVfZm4oZW1wbG95ZWUsIHNlY3VyaXR5LCB0cmFkZV9kYXRlKQoKaWYgbm90IGlzaW5zdGFuY2UocmVzdWx0LCBkaWN0KToKICAgIHJhaXNlIFZhbHVlRXJyb3IoIlJ1bGUgbXVzdCByZXR1cm4gYSBkaWN0IHdpdGggYW4gJ2FsbG93ZWQnIGtleSIpCgppZiAiYWxsb3dlZCIgbm90IGluIHJlc3VsdDoKICAgIHJhaXNlIFZhbHVlRXJyb3IoIlJlc3VsdCBkaWN0IGlzIG1pc3NpbmcgJ2FsbG93ZWQnIikKCnByaW50KCJfX1JVTEVfT1VUUFVUX18iKQpwcmludChqc29uLmR1bXBzKHJlc3VsdCkpCnByaW50KCJfX1JVTEVfT1VUUFVUX0VORF9fIikK\").decode())\n    ~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"<string>\", line 37, in <module>\n  File \"<string>\", line 3, in rule\nAttributeError: 'str' object has no attribute 'get'",
          "timestamp": "2025-11-18T20:40:50.386Z"
        },
        {
          "attempt_number": 2,
          "passed": true,
          "test_output": "{\"allowed\":false,\"reason\":\"Trade is within 5 days of earnings date 2025-11-20.\",\"policy_ref\":\"Meridian Policy - Earnings Blackout\"}",
          "timestamp": "2025-11-18T20:41:03.936Z"
        }
      ]
    },
    {
      "rule_id": "analyst_coverage_preapproval",
      "rule_name": "Analyst Coverage Pre-Approval Required",
      "description": "Requires analysts to obtain pre-approval before trading in securities they cover.",
      "policy_reference": "Meridian Policy - Analyst Pre-Approval",
      "python_code": "def rule(employee, security, trade):\n    role = employee.get('role', '')\n    if 'Equity Research Analyst' not in role and 'Research Analyst' not in role and 'Analyst' not in role:\n        return {'allowed': True, 'reason': None, 'policy_ref': None}\n    coverage_stocks = employee.get('coverage_stocks', [])\n    covered_tickers = [stock['ticker'] for stock in coverage_stocks]\n    if security['ticker'] in covered_tickers:\n        can_trade = employee.get('can_trade', [])\n        if security['ticker'] not in can_trade:\n            return {'allowed': False, 'reason': f\"Analyst must obtain pre-approval to trade covered security {security['ticker']}.\", 'policy_ref': 'Meridian Policy - Analyst Pre-Approval'}\n    return {'allowed': True, 'reason': None, 'policy_ref': None}",
      "applies_to_roles": [
        "Equity Research Analyst"
      ],
      "active": true,
      "generation_attempt": 1,
      "validation_history": [
        {
          "attempt_number": 1,
          "passed": true,
          "test_output": "{\"allowed\":false,\"reason\":\"Analyst must obtain pre-approval to trade covered security TSLA.\",\"policy_ref\":\"Meridian Policy - Analyst Pre-Approval\"}",
          "timestamp": "2025-11-18T20:41:05.433Z"
        }
      ]
    }
  ]
}